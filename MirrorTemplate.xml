 <Ui xmlns="http://www.blizzard.com/wow/ui/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.blizzard.com/wow/ui/
..\FrameXML\UI.xsd">
    <Script file="Mirror.lua"/>
    <Frame name="MirrorTipTemplate" virtual="true" hidden="true">
        <Size>
            <AbsDimension x="38" y="10"/>
        </Size>
        <Layers>
            <Layer level="BACKGROUND">
                <Texture name="$parentBackground" setallpoints="true">
                    <Color r="1" g="1" b="1" a="0.5" />
                </Texture>
            </Layer>
            <Layer level="OVERLAY">
                <FontString name="$parentText" inherits="GameFontHighlightSmallOutline" setallpoints="true"/>
            </Layer>
        </Layers>
        <Scripts>
            <OnShow>
                if this.next then
                    MirrorTip_restorePoints(this.next)
                end
            </OnShow>
            <OnHide>
                if this.next then
                    MirrorTip_restoreAltPoints(this.next)
                end
            </OnHide>
        </Scripts>
    </Frame>
    <Frame name="MirrorTemplate" hidden="true" virtual="true">
        <Size>
            <AbsDimension x="36" y="36"/>
        </Size>
        <Layers>
            <Layer level="BACKGROUND">
                <Texture name="$parentIcon"/>
            </Layer>
            <Layer level="BORDER">
                
                <Texture name="$parentNormalTexture" file="Interface\Addons\ActionMirroringFrame\ButtonBorder">
                    <Size>
                        <AbsDimension x="66" y="66"/>
                    </Size>
                    <Anchors>
                        <Anchor point="CENTER">
                        </Anchor>
                    </Anchors>
                </Texture>
                <Texture name="$parentHighlightTexture" alphaMode="ADD" file="Interface\Addons\ActionMirroringFrame\ButtonHighlight" setallpoints="true" hidden="true"/>
            </Layer>
            <Layer level="ARTWORK">
                <Texture name="$parentFlash" file="Interface\Buttons\UI-QuickslotRed" hidden="true"/>
                <FontString name="$parentHotKey" inherits="NumberFontNormalSmallGray" justifyH="RIGHT">
                    <Size>
                        <AbsDimension x="36" y="10"/>
                    </Size>
                    <Anchors>
                        <Anchor point="TOPLEFT">
                            <Offset>
                                <AbsDimension x="-2" y="-2"/>
                            </Offset>
                        </Anchor>
                    </Anchors>
                </FontString>
                <FontString name="$parentCount" inherits="NumberFontNormal" justifyH="RIGHT">
                    <Anchors>
                        <Anchor point="BOTTOMRIGHT">
                            <Offset>
                                <AbsDimension x="-2" y="2"/>
                            </Offset>
                        </Anchor>
                    </Anchors>
                </FontString>
            </Layer>
            <Layer level="OVERLAY">
                <FontString name="$parentName" inherits="GameFontHighlightSmallOutline">
                    <Size>
                        <AbsDimension x="36" y="10"/>
                    </Size>
                    <Anchors>
                        <Anchor point="BOTTOM">
                            <Offset>
                                <AbsDimension x="0" y="2"/>
                            </Offset>
                        </Anchor>
                    </Anchors>
                </FontString>
                <Texture name="$parentBorder" file="Interface\Buttons\UI-ActionButton-Border" hidden="true" alphaMode="ADD">
                    <Size>
                        <AbsDimension x="62" y="62"/>
                    </Size>
                    <Anchors>
                        <Anchor point="CENTER">
                        </Anchor>
                    </Anchors>
                </Texture>
            </Layer>
        </Layers>
        <Frames>
            <Model name="$parentCooldown" inherits="CooldownFrameTemplate">
                <Size x="36" y="36"/>
            </Model>
            <Frame name="$parentCooldownTip" inherits="MirrorTipTemplate">
                <Scripts>
                    <OnLoad>
                        this.offset=6
                    </OnLoad>
                    <OnUpdate>
                        Mirror_UpdateCooldownTip()
                    </OnUpdate>
                    <OnLoad>
                        getglobal(this:GetName().."Background"):SetVertexColor(0,0,0)
                        Mirror_changeTipsPosition(this, ActionMirroringSettings.orientation+1)
                    </OnLoad>
                </Scripts>
            </Frame>
            <Frame name="$parentPowerTip" inherits="MirrorTipTemplate">
                <Scripts>
                    <OnLoad>
                        this.points =           {{"BOTTOM", this:GetParent():GetName().."CooldownTip", "TOP", 0, 3}}
                        this.revertedPoints =   {{"TOP", this:GetParent():GetName().."CooldownTip", "BOTTOM", 0, -3}}
                        this.altPoints =        {{"BOTTOM", this:GetParent():GetName().."CooldownTip", "BOTTOM", 0, 0}}
                        getglobal(this:GetParent():GetName().."CooldownTip").next = this
                        MirrorTip_restoreAltPoints(this)
                    </OnLoad>
                    <OnUpdate>
                        Mirror_UpdatePowerTip()
                    </OnUpdate>
                </Scripts>
            </Frame>
        </Frames>
        <Scripts>
            <OnLoad>
                function this:SetChecked(check)
                    if check then
                        getglobal(this:GetName().."HighlightTexture"):Show()
                    else
                        getglobal(this:GetName().."HighlightTexture"):Hide()
                    end
                end
                this.refresh = Mirror_Refresh
                Mirror_OnLoad()
                this.overflow = ActionMirroringFrame_overflow
                this.getFirst = ActionMirroringFrame_getFirst
                this.isCurrent = ActionMirroringFrame_isCurrent
                this.hold = ActionMirroringFrame_hold
                this.updateOrientation = ActionMirroringFrame_updateOrientation
            </OnLoad>
            <OnUpdate>
                Mirror_OnUpdate()
            </OnUpdate>
            <OnEvent>
                Mirror_OnEvent(event)
            </OnEvent>
        </Scripts>
    </Frame>
</Ui>
